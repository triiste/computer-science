# 5.Git

## git教程

代码托管平台：git.acwing.com

###  git基本概念

~~~shell
工作区：仓库的目录。工作区是独立于各个分支的。
暂存区：数据暂时存放的区域，类似于工作区写入版本库前的缓存区。暂存区是独立于各个分支的。
版本库：存放所有已经提交到本地仓库的代码版本
版本结构：树结构，树中每个节点代表一个代码版本。
~~~

### git常用命令

~~~ 
git config --global user.email xxx@xxx.com：设置全局邮箱地址，信息记录在~/.gitconfig文件中
//先建文件夹,然后把该文件夹创建成仓库 例如
mkdir project
git init：将当前目录配置成git仓库，信息记录在隐藏的.git文件夹中
ls -a //将所有信息放在了.git文件夹中
//编辑一个文件然后查看当前仓库状态人
git status：查看仓库状态
//此时提示一个文件没有被加到暂存区

git add XX：将XX文件添加到暂存区
//通过git add将此文件加入到暂存区
git add .：将所有待加入暂存区的文件加入暂存区

//修改编辑 ->暂存区 -> 版本库
git commit -m "给自己看的备注信息"：将暂存区的内容提交到当前分支

比较对象是 当前文件与暂存区之间的区别
git diff XX：查看XX文件相对于暂存区修改了哪些内容


git rm --cached XX：将文件从仓库索引目录中删掉 不管理了

git log：查看当前分支的所有版本
git log --pretty=oneline //显示到一行,看的清楚点

代码回滚
git reset --hard HEAD^ 或 git reset --hard HEAD~：将代码库回滚到上一个版本
git reset --hard HEAD^^：往上回滚两次，以此类推
git reset --hard HEAD~100：往上回滚100个版本
git reflog：查看HEAD指针的移动历史（包括被回滚的版本）

git reset --hard 版本号：回滚到某一特定版本
tmux中复制:
Ctrl a + [  复制
Ctrl a + ]  粘贴



例如 
add 555 加入到暂存区 
add 666 目前未加入暂存区，在工作区
将666删掉  

1.//将暂存区的文件取出来
git restore --stage readme.txt 
//只有没加入到暂存区的文件才可以使用如下命令
2.git restore readme.txt 将我们工作区的最新修改回滚到我们暂存区存的内容，如果暂存区没有存任何内容，表示头节点指示的版本（把工作区相对于暂存区的修改删掉了）
~~~

~~~nginx
tmux中复制粘贴
复制：1.shift+鼠标进行选择 2.Ctrl + Insert
粘贴：Ctrl+V
放全屏：Ctrl+A+Z
将文本复制进tmux: Shift+Insert
~~~

~~~
//将本地仓库关联到远程仓库
git remote add origin git@git.acwing.com:triste/project.git

git push -u origin master
git push -u (第一次需要-u以后不需要)：将当前分支推送到远程仓库
git push origin branch_name：将本地的某个分支推送到远程仓库


git remote add origin git@github.com:triiste/management-system.git


//将本地文件完全删除后，从远程仓库中克隆出来
git clone git@git.acwing.com:xxx/XXX.git：将远程仓库XXX下载到下
~~~



~~~
//分支操作
master分支
dev分支
~~~










git checkout — XX或git restore XX：将XX文件尚未加入暂存区的修改全部撤销
git remote add origin git@git.acwing.com:xxx/XXX.git：将本地仓库关联到远程仓库
git push -u (第一次需要-u以后不需要)：将当前分支推送到远程仓库
git push origin branch_name：将本地的某个分支推送到远程仓库

git checkout -b branch_name：创建并切换到branch_name这个分支
git branch：查看所有分支和当前所处分支
git checkout branch_name：切换到branch_name这个分支
git merge branch_name：将分支branch_name合并到当前分支上
git branch -d branch_name：删除本地仓库的branch_name分支
git branch branch_name：创建新分支
git push --set-upstream origin branch_name：设置本地的branch_name分支对应远程仓库的branch_name分支
git push -d origin branch_name：删除远程仓库的branch_name分支
git pull：将远程仓库的当前分支与本地仓库的当前分支合并
git pull origin branch_name：将远程仓库的branch_name分支与本地仓库的当前分支合并
git branch --set-upstream-to=origin/branch_name1 branch_name2：将远程的branch_name1分支与本地的branch_name2分支对应
git checkout -t origin/branch_name 将远程的branch_name分支拉取到本地
git stash：将工作区和暂存区中尚未提交的修改存入栈中
git stash apply：将栈顶存储的修改恢复到当前分支，但不删除栈顶元素
git stash drop：删除栈顶存储的修改
git stash pop：将栈顶存储的修改恢复到当前分支，同时删除栈顶元素
git stash list：查看栈中所有元素

2. 创建作业 & 测试作业的正确性
homework 5 create  # 可以重新创建所有lesson_5的作业
homework 5 test  # 可以评测lesson_5的所有作业
3. 作业
注意： 本次作业的10个题目不是独立的，每个题目会依赖于前一个题目，因此评测时如果当前题目错误，则不再评测后续题目。

创建好作业后，先进入文件夹/home/acs/homework/lesson_5/，然后：

(0) 在当前目录下创建文件夹homework，并将homework目录配置成git仓库。后续作业均在homework目录下操作；
(1) 创建文件readme.txt，内容包含一行：111；
将修改提交一个commit；
(2) 在readme.txt文件末尾新增一行：222；
将修改提交一个commit；
(3) 创建文件夹：problem1和problem2；
创建文件problem1/main.cpp。文件内容为下述链接中的代码：https://www.acwing.com/problem/content/submission/code_detail/7834813/；
创建文件problem2/main.cpp。文件内容为下述链接中的代码：https://www.acwing.com/problem/content/submission/code_detail/7834819/；
将修改提交一个commit；
(4) 删除文件夹problem2；
创建文件夹problem3；
创建文件problem3/main.cpp。文件内容为下述链接中的代码：https://www.acwing.com/problem/content/submission/code_detail/7834841/；
将readme.txt中最后一行222删掉，然后添加一行333；
将修改提交一个commit；
(5) 在https://git.acwing.com/上注册账号并创建仓库，仓库名称为homework；
将本地git仓库上传到AC Git云端仓库；
(6) 创建并切换至新分支dev；
在readme.txt文件中添加一行444；
将修改提交一个commit；
将dev分支推送至AC Git远程仓库；
(7) 切换回master分支；
在readme.txt文件中添加一行555；
将修改提交一个commit；
(8) 将dev分支合并到master分支；
手动处理冲突，使readme文件最终内容包含4行：111、333、555、444；
将修改提交一个commit；
(9) 将master分支的版本库push到AC Git云端仓库；
登录myserver服务器（4. ssh作业中配置的服务器）；
创建并清空文件夹：~/homework/lesson_5/；
将AC Git云端仓库clone到~/homework/lesson_5/中；

